<!DOCTYPE html>

<html>

<head>

<title>Friends of Ming Chow Jobs Listing</title>

<link rel="stylesheet">

<script>

station = new Array();
		station[0] = {'name': 'Alewife', 'lat': 42.395428, 'lon': -71.142483, 'north': 'RALEN', 'south': 'RALES', 'info': 'a'};
		station[1] = {'name': 'Davis', 'lat': 42.39674, 'lon': -71.121815, 'north': 'RDAVN', 'south': 'RDAVS', 'info': ' '};
		station[2] = {'name': 'Porter', 'lat': 42.3884, 'lon': -71.119149, 'north': 'RPORN', 'south': 'RPORS', 'info': ' '};
		station[3] = {'name': 'Harvard', 'lat': 42.373362, 'lon': -71.118956, 'north': 'RHARN', 'south': 'RHARS', 'info': ' '};
		station[4] = {'name': 'Central','lat': 42.365486, 'lon': -71.103802, 'north': 'RCENN', 'south': 'RCENS', 'info': ' '};
		station[5] = {'name': 'Kendall', 'lat': 42.36249079, 'lon': -71.08617653, 'north': 'RKENN', 'south': 'RKENS', 'info': ' '};
		station[6] = {'name': 'Charles MGH', 'lat': 42.361166, 'lon': -71.070628, 'north': 'RMGHN', 'south': 'RMGHS', 'info': ' '};
		station[7] = {'name': 'Park St', 'lat': 42.35639457, 'lon': -71.0624242, 'north': 'RPRKN', 'south': 'RPRKS', 'info': ' '};
		station[8] = {'name': 'Downtown Crossing', 'lat': 42.355518, 'lon': -71.060225, 'north': 'RDTCN', 'south': 'RDTCS', 'info': ' '};
		station[9] = {'name': 'South Station', 'lat': 42.352271, 'lon': -71.055242, 'north': 'RSOUN', 'south': 'RSOUS', 'info': ' '};
		station[10] = {'name': 'Broadway', 'lat': 42.342622, 'lon': -71.056967, 'north': 'RBRON', 'south': 'RBROS', 'info': ' '};
		station[11] = {'name': 'Andrew', 'lat': 42.330154, 'lon': -71.057655, 'north': 'RANDN', 'south': 'RANDS', 'info': ' '};
		station[12] = {'name': 'JFK', 'lat': 42.320685, 'lon': -71.052391, 'north': 'RJFKN', 'south': 'RJFKS', 'info': ' '};
		station[13] = {'name': 'Savinhill', 'lat': 42.31129, 'lon': -71.053331, 'north': 'RSAVN', 'south': 'RSAVS', 'info': ' '};
		station[14] = {'name': 'Fields Corner', 'lat': 42.300093, 'lon': -71.061667, 'north': 'RFIEN', 'south': 'RFIES', 'info': ' '};
		station[15] = {'name': 'Shawmut', 'lat': 42.29312583, 'lon': -71.06573796, 'north': 'RSHAN', 'south': 'SHAS', 'info': ' '};
		station[16] = {'name': 'Ashmont', 'lat': 42.284652, 'lon': -71.064489, 'north': 'RASHN', 'south': 'RASHS', 'info': ' '};
		station[17] = {'name': 'Wollaston', 'lat': 42.2665139, 'lon': -71.0203369, 'north': 'RWOLN', 'south': 'RWOLS', 'info': ' '};
		station[18] = {'name': 'Quincy Center', 'lat': 42.251809, 'lon': -71.005409, 'north': 'RQUCN', 'south': 'RQUCS', 'info': ' '};
		station[19] = {'name': 'Quincy Adams', 'lat': 42.233391, 'lon': -71.007153, 'north': 'RQUAN', 'south': 'RQUAS', 'info': ' '};
		station[20] = {'name': 'Braintree', 'lat': 42.2078543, 'lon': -71.0011385, 'north': 'RBRAN', 'south': 'RBRAS', 'info': ' '};		
	

function requestSchedule(){

try {

requestsched = new XMLHttpRequest();

}

catch (ms1) {
try {
requestsched = new ActiveXObject("Msxml2.XMLHTTP");
}
catch (ms2) {
try {
requestsched = new ActiveXObject("Microsoft.XMLHTTP");
}
catch (ex) {
requestsched = null;
}
}
}

if (requestsched == null) {
alert("Error creating request object -- Ajax not supported?");
}

try {

requestsched.open("GET", "http://mbtamap-cedar.herokuapp.com/mapper/redline.json", true);

requestsched.send(null);

requestsched.onreadystatechange = callbackSchedule;

}

catch (error) {

alert("Whoops, exception caught!");

}

}

function callbackSchedule(){

try {

if (requestsched.readyState == 4 && requestsched.status == 200) {

	parsedSched = JSON.parse(requestsched.responseText);
	/*for (var i = 0; i < station.length; i++){
					
					for (var j = 0; j < parsedSched.length; j++){
						if (parsedSched[j].PlatformKey == station[i].north && parsedSched[j].InformationType == 'Predicted'){
							station[i].info = station[i].info + '<tr><td>' + parsedSched[j].Line + '</td><td>' + parsedSched[j].Trip + '</td><td>' + 'north' + '</td><td>' + parsedSched[j].TimeRemaining + '</td></tr>';
						}
						if (parsedSched[i].PlatformKey == station[i].south && parsedSched[j].InformationType == 'Predicted'){
							station[i].info = station[i].info + '<tr><td>' + parsedSched[j].Line + '</td><td>' + parsedSched[j].Trip + '</td><td>' + 'south' + '</td><td>' + parsedSched[j].TimeRemaining + '</td></tr>';
						}
					}
					console.log(station[i].info);
					
				}*/
for (var i = 0; i < station.length; i++){
					
					for (var j = 0; j < parsedSched.length; j++){
						if (parsedSched[j].PlatformKey == station[i].north && parsedSched[j].InformationType == 'Predicted'){
							console.log(station[i].south);
						}
						if (parsedSched[i].PlatformKey == station[i].south && parsedSched[j].InformationType == 'Predicted'){
							
						}
					}

}

}

}
catch (error) {

alert("Whoops, exception caught!");

}

}

</script>

</head>

<body onload='requestSchedule()'>

<div id="list"></div>

</body>

</html>